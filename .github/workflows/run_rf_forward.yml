name: Run RF Forward Training

on:
  workflow_dispatch:  # Cho phÃ©p cháº¡y thá»§ cÃ´ng tá»« tab "Actions"

jobs:
  run_rf_forward:
    runs-on: ubuntu-latest

    steps:
      # 1ï¸âƒ£ Checkout repo (ráº¥t quan trá»ng)
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2ï¸âƒ£ CÃ i mÃ´i trÆ°á»ng Python
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      # 3ï¸âƒ£ CÃ i cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t
      - name: Install dependencies
        run: |
          pip install -U pip
          pip install numpy pandas scikit-learn imbalanced-learn matplotlib

      # 4ï¸âƒ£ Táº£i file dá»¯ liá»‡u máº«u vá»
      - name: Download dataset
        run: |
          mkdir -p data
          wget -O data/data2.csv https://github.com/thanhnha01/NCKH_ANHHONG/releases/download/v1.0/data2.csv

      # 5ï¸âƒ£ Debug â€” liá»‡t kÃª toÃ n bá»™ file Ä‘á»ƒ xem rf_forward_train.py á»Ÿ Ä‘Ã¢u
      - name: Debug â€” list repo files
        run: |
          echo "ğŸ“‚ Current working directory:"
          pwd
          echo "ğŸ“„ Files in current directory:"
          ls -la
          echo "ğŸ“‚ Full repo structure:"
          ls -R

      # 6ï¸âƒ£ Cháº¡y file Python chÃ­nh
      - name: Run RF Forward training
        run: |
          python rf_forward_train.py

      # 7ï¸âƒ£ NÃ©n káº¿t quáº£ Ä‘áº§u ra (thÆ° má»¥c results)
      - name: Compress results
        run: |
          zip -r results.zip results

      # 8ï¸âƒ£ Upload file nÃ©n lÃªn pháº§n Releases
      - name: Upload to Release
        uses: softprops/action-gh-release@v2
        with:
          files: results.zip
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
